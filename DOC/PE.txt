Control PE dataflow

filter
1) path : fifo -> rf -> multiplier
2) filter fixed when one row finished

feature
1) path : fifo -> rf -> multiplier
2) feature slide in to rf when one row element acc finished

psum
1) path : rf -> adder
2) every cycle, accumlate and out


RF는 write시 clock sync에 update
Showahead하게 계속 data 뿜어내는 중 -> 실제로 data가 나오는데 delay가 존재하지 않나?
buffer로 처리해줘야 될거 같은데 잘 모르겠다

read RF && buffer en

rf가 저장하고 있어야 하는 것?
weight고정
feature는 slide
psum?
크기는?
feature: 1byte x feature row(13>)
weight : 1byte x weigth row(3>)
psum   : 2byte x 
                
                                     
Cycle           1       2       3       4       5       6       7       8       9       10      11      12      13      14
feature fifo:   rden    rden    rden    rden    rden    rden    rden    rden    rden    rden    rden    rden    rden    
filter  fifo:   rden    rden    rden    rden    rden    rden    rden    rden    rden    rden    rden    rden    rden    

feature rf:     wa,we   wa,we   wa,we   wa,we   wa,we   wa,we   wa,we   wa,we   wa,we   wa,we   wa,we   wa,we   wa,we
feature rf:             ra      ra      ra      ra      ra      ra      ra      ra      ra      ra      ra      ra      ra
feature w:      a1      a2      a3      a4      a5      a6      a7      a8      a9      a10     a11     a12     a13
feature o:              a1      a2      a3      
feature buf:                    a1      a2      a3


filter  rf:     wa,we   wa,we   wa,we   wa,we   wa,we   wa,we   wa,we   wa,we   wa,we   wa,we   wa,we   wa,we   wa,we
filter  rf:             ra      ra      ra      ra      ra      ra      ra      ra      ra      ra      ra      ra      ra
filter w:       b1      b2      b3
filter o:               b1      b2      b3
filter buf:                     b1      b2      b3


stage1_mul:                     a1,b1   a2,b2   a3,b3
mul_buf:                                a1,b1   a2,b2   a3,b3   
stage2_mul:                             a1,b1   a2,b2   a3,b3

2to1mux:                                MAC1    MAC2    MAC3

mux_to_add_buf:                                 MAC1    MAC2    MAC3

stage1_add:                                     M1,P    M2,M1P  M3,M2P
add_buf:                                                M1,P    M2,M1P  M3,M2P
stage2_add:                                             M1,P    M2,M1P  M3,M2P

psum rf:                                                we,wa   we,wa   we,wa
psum rf_wd:                                             M1P     M2P     M3P                                                              
pe_ra:          P       M1P       
delay1:                 P       M1P
delay2:                         p       M1P
delay3:                                 P       M1P
delay4:                                         P       M1P
psum_rf_o:                                      P


M1 + P      M2 + M1

            M1 + P
            